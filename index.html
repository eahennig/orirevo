<!DOCTYPE html>
<html lang="en">
<head>
  <title>ORI-REVO</title>
  <meta charset="utf-8">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="avantui.min.css">

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
    integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"
    crossorigin="anonymous"></script>
  
  <!-- https://www.avantui.com/ -->
  <script src="assets/js/avantui.js"></script>
 
  <style>
    body {
      margin: 0;
    }

    .box {
      height: 100vh;
      display: grid;
      grid-template-rows: 50px 1fr;
    }

    .box2 {
      display: grid;
      grid-template-columns: 0.8fr 1fr 1fr;
    }

    .box3 {
      display: grid;
      grid-template-rows: 3fr 2fr;
    }

    .wrapper {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .canvas1 {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .canvas2 {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .canvas3 {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .menu {
      margin-left: 30px;
    }

    .header {
      text-align: center;
      font-size: 150%;
    }

    .modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background-color: #f4f4f4;
  margin: 5% auto;
  width: 50%;
  box-shadow: 0 5px 8px 0 rgba(0,0,0,0.2),0 7px 20px 0 rgba(0,0,0,0.17);
  animation-name: modalopen;
  animation-duration: 1s;
}

@keyframes modalopen {
  from {opacity: 0}
  to {opacity: 1}
}

.modal-header h1 {
  margin: 1rem 0;
}

.modal-header {
  background: lightblue;
  padding: 3px 15px;
  display: flex;
  justify-content: space-between;
}

.modalClose {
  font-size: 2rem;
}

.modalClose:hover {
  cursor: pointer;
}

.modal-body {
  padding: 10px 20px;
  color: black;
}

  </style>
</head>

<body>
  <div class="box">
    <div name="header" class="header">
      ORI-REVO <span style="font-size:50%">(by <a href="https://mitani.cs.tsukuba.ac.jp/">Jun Mitani</a>, 2022)</span>
    </div>
    <div class="box2">
      <div class="menu">
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="ck_grid" checked/>
            <label class="custom-control-label" for="ck_grid">Show grid & snap to grid</label>
          </div>
          <label>&nbsp;&nbsp;&nbsp;Grid interval</label>
          <input class="btn btn-primary btn-sm" type="button" value="x 1/2" id="grid_inc" />
          <input class="btn btn-primary btn-sm" type="button" value="x 2" id="grid_dec" /><br><br>

          <div class="form-group">
            <table>
              <tr>
                <td width="50%"><label for="divNum">Divisions &nbsp;&nbsp;&nbsp;</label></td>
                <td>
                  <select class="custom-select custom-select-sm" id="divNum">
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6" selected>6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="20">20</option>
                    <option value="24">24</option>
                  </select>
                </td>
              </tr>
            </table>
          </div>

          <div class="form-group">
            <label id="modelTypeName">Model type</label><br>

            <input type="radio" name="modelType" value="0" id="type_flap_cylinder" checked ><label for="type_flap_cylinder"></label>
            <input type="radio" name="modelType" value="1" id="type_prism_cylinder"><label for="type_prism_cylinder"></label>
            <input type="radio" name="modelType" value="2" id="type_flap_disk"><label for="type_flap_disk"></label>
            <input type="radio" name="modelType" value="3" id="type_prism_disk"><label for="type_prism_disk"></label>
          </div>
          <style>
            input[type=radio]+label:before {
              content: "";
              display: inline-block;
              background-size: contain;
              width: 70px;
              height: 70px;
            }

            input[type=radio][value="0"]+label:before {
              background-image: url(./img/cyl_flap.png);
              background-repeat: no-repeat;
            }

            input[type=radio][value="1"]+label:before {
              background-image: url(./img/cyl_prism.png);
              background-repeat: no-repeat;
            }

            input[type=radio][value="2"]+label:before {
              background-image: url(./img/disk_flap.png);
              background-repeat: no-repeat;
            }

            input[type=radio][value="3"]+label:before {
              background-image: url(./img/disk_prism.png);
              background-repeat: no-repeat;
            }

            input[type=radio]:checked+label::before {
              border: 2px solid #406aff;
              border-radius: 6px;
              box-sizing: border-box;
            }

            input[type=radio] {
              display: none;
            }
          </style>
          <div id="div_flapsize">
            <label for="flapSizeRange">Flap size</label>
            <input id="flapSizeRange" type="range" min="1" max="400" step="1" value="20"/>
            <span id="FlapSize">20</span><br><br>
          </div>
          <div id="div_hole">
            <label for="holeRadiusRange">Hole radius</label>
            <input id="holeRadiusRange" type="range" min="0" max="100" step="1" value="0"/>
            <span id="Hole">0</span><br><br>
          </div>
          <div id="div_glueArea">
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input" id="ck_glueArea">
              <label class="custom-control-label" for="ck_glueArea">Draw glueing area</label>
            </div>
          </div>
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="ck_hideHline" checked />
            <label class="custom-control-label" for="ck_hideHline">Hide almost flat edges</label>
          </div>
          <div id="div_hide_angle">
            <label for="hideAngleRange">&nbsp;&nbsp;&nbsp;Hide angle (deg.)</label>
            <input id="hideAngleRange" type="range" min="1" max="90" step="1" value="25"/>
            <span id="HideAngle">25</span><br><br>
          </div>
          <input class="btn btn-primary btn-sm" type="button" value="Smooth" id="smooth_btn"/>
          <input class="btn btn-primary btn-sm" type="button" value="Undo Smooth" id ="undo_smooth" disabled/><br>
          <br>
          <table width="100%"><tr><td width="50%">
          <div class="form-group">
            <select class="custom-select" id="export_data_type">
              <option value="-1" selected>= Export data =</option>
              <option value="dxf">Crease pattern (.dxf)</option>
              <option value="svg">Crease pattern (.svg)</option>
              <option value="obj">3D model (.obj)</option>
              <option value="orirevo">ORI-REVO data (.orirevo)</option>
            </select>
          </div>
        </td><td>

          <div class="form-group">
            <select class="custom-select" id="load_example">
              <option value="-1" selected>= Load example data =</option>
              <option value="sphere8">Sphere with 8 flaps</option>
              <option value="sphere16">Sphere with 16 flaps</option>
              <option value="egg">Wrapped egg</option>
              <option value="wrapped_sphere">Wrapped sphere</option>
              <option value="twisted_tower">Twisted tower</option>
              <option value="bell">Bell</option>
              <option value="gift_box">Gift box</option>
              <option value="stacked_3_boxes">Stacked three boxes</option>
              <option value="whipped_cream">Whipped cream</option>
            </select>
          </div>
        </td>
        </tr></table>
          <div class="custom-file">
            <input type="file" class="custom-file-input" id="orirevo_file"/>
            <label class="custom-file-label" for="orirevo_file">= Load .orirevo file =</label>
          </div>
          <br>
          <br>
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="ck_Animation" />
            <label class="custom-control-label" for="ck_Animation">Fold-unfold animation</label>
          </div>
          <br>

          <div id="div_face_opacity">
            <label for="faceOpacityRange">Face opacity (%)</label>
            <input id="faceOpacityRange" type="range" min="0" max="100" step="1" value="100"/>
            <span id="FaceOpacity">100</span><br><br>
          </div>
					
          <div>
            <input class="btn btn-danger btn-sm" type="button" value="Clear" id="clear_btn"/><br><br>
          </div>             

          <!-- ref https://tcd-theme.com/2021/08/javascript-modalwindow.html -->
          <button id="modalOpen" class="btn btn-info btn-sm">About</button>
          <br><br>
          <div id="easyModal" class="modal">
            <div class="modal-content">
              <div class="modal-header">
                <h1>About ORI-REVO</h1>
                <span class="modalClose">&times;</span>
              </div>
              <div class="modal-body">
                <img src="img/balls.jpg" align="right" width="300">
                <h2>Operation Tips</h2>               
                <ul>
                  <li><b>Right Mouse Click</b> removes the clicked vertex (clicking on an empty space removes the last vertex).</li>
                  <li><b>Dragging a vertex with [Ctrl]+Left Mouse</b> duplicates the vertex.</li>
                </ul>

                <h2>Information</h2>
                <ul>
                  <li>This software was developed by <a href="https://mitani.cs.tsukuba.ac.jp/ja/index.html" target="_blank">Jun Mitani</a>.</li>
                  <li>This software is released under the MIT license on 8 June 2022.</li>
                  <li>The source code is placed on <a href="https://github.com/jun-mitani/orirevo" target="_blank">the GitHub repository</a>.</li>
                  <li>The algorithm used for generating 3D models is from the following paper:<br><span style="font-style : italic">Jun Mitani, "A Design Method for 3D Origami Based on Rotational Sweep", Computer-Aided Design and Applications, Vol.6, No.1, pp.69-79, 2009.</span><a href="http://mitani.cs.tsukuba.ac.jp/dl/CAD_2009_3d_origami_based_on_rotational_sweep_mitani.pdf">(PDF)</a></it></li>
                  <li>This software has been tested on Chrome 103.</li>
                  <li>You are free to use this software for any purpose, including personal use, workshop use, and commercial product development. 
                    I would be very happy if you respect the developer, cite the software appropriately, and report on your use cases to mitani@cs.tsukuba.ac.jp</li>
                  <li>The books written by the author of this software:<br><br>
                    <a href="https://www.nippyo.co.jp/rittai_origami/" target="_blank"><img src="img/cover_rittai_origami2.jpg" height="160"></a>
                    <a href="https://www.nippyo.co.jp/kyokusen_origami/" target="_blank"><img src="img/cover_CurvedFoldOrigamiDesign2.jpg" height="160"></a>
                    <a href="https://mitani.cs.tsukuba.ac.jp/book/3d_origami_art/index.html" target="_blank"><img src="img/3d_origami_art_book.png" height="160"></a>
                    <a href="https://mitani.cs.tsukuba.ac.jp/book/curved_folding/index.html" target="_blank"><img src="img/curved_folding_origami_book.jpg" height="160"></a>
                  </li>
                </ul>

                <h3>External Libraries</h2>
                <ul>
                  <li> 3D rendering: <a target="_blank" href="https://threejs.org/">tree.js</a> </li>
                  <li> UI and style: <a target="_blank" href="https://jquery.com/">jQuery</a>,
                  <a target="_blank" href="https://getbootstrap.jp/">Bootstrap</a>,
                  <a target="_blank" href="https://www.avantui.com/">avantui.js</a></li>
                </ul>
              </div>
            </div>
          </div>

            <div class="tips">
              <small>
                <a href="https://www.instagram.com/mitani.jun/"> &gt;&gt;  Origami works of Jun Mitani on Instagram. </a><br>                
                <span id="last_update"></span>
              </small>
            </div>

      </div>
      <div class="wrapper" id="wrapper1">
        <canvas class="canvas1" id="canvas1"></canvas>
      </div>
      <div class="box3">
        <div class="wrapper" id="wrapper2">
        </div>
        <div class="wrapper" id="wrapper3">
          <canvas class="canvas2" id="canvas2"></canvas>
        </div>
      </div>
    </div>
  </div>

<script src="orirevo_about.js"></script>
<script src="orirevo_util.js"></script>

<script type="module" src="orirevo_main.js"></script>
</body>
</html>